<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.yjcycc.shop.goods.mapper.GoodsMapper">
	
	<!-- table name -->
	<sql id="tableName">
		yjcycc_goods
	</sql>
	
	<!-- select field -->
	<sql id="selectField">
		id,
		name, 
		description,
		meta_description as metaDescription,
		meta_keywords as metaKeywords,
		cost_price as costPrice,
		market_price as marketPrice,
		price,
		stock,
		init_sales as initSales,
		real_sales as realSales,
		color_size as colorSize,
		is_shelves_up as isShelvesUp,
		is_pre_sale as isPreSale,
		goods_category_id as goodsCategoryId,
		goods_introduce_id as goodsIntroduceId,
		goods_params_id as goodsParamsId,
		insert_time as insertTime,
		update_time as updateTime
	</sql>
	
	<!-- add field -->
	<sql id="addField">
		name, 
		description,
		meta_description,
		meta_keywords,
		cost_price,
		market_price,
		price,
		stock,
		init_sales,
		real_sales,
		color_size,
		is_shelves_up,
		is_pre_sale,
		goods_category_id,
		goods_introduce_id,
		goods_params_id,
		insert_time,
		update_time
	</sql>
	
	<!-- field values -->
	<sql id="FieldValue">
		#{name}, 
		#{description},
		#{metaDescription},
		#{metaKeywords},
		#{costPrice},
		#{marketPrice},
		#{price},
		#{stock},
		#{initSales},
		#{realSales},
		#{colorSize},
		#{isShelvesUp},
		#{isPreSale},
		#{goodsCategoryId},
		#{goodsIntroduceId},
		#{goodsParamsId},
		#{insertTime},
		#{updateTime}
	</sql>
	
	<!-- save -->
	<insert id="save" parameterType="goods">
		insert into 
		<include refid="tableName"></include>
		(
		<include refid="addField"></include>
		) values (
		<include refid="FieldValue"></include>
		)
	</insert>
	
	<!-- findById -->
	<select id="findById" resultType="goods" parameterType="String">
		select 
		<include refid="selectField"></include>
		from 
		<include refid="tableName"></include>
		where 
			id = #{id}
	</select>
	
	<!-- 分页, 使用了pagehelper插件 -->
	<select id="findPager" resultType="goods" parameterType="map">
		select 
			id,
			name, 
			description,
			meta_description as metaDescription,
			meta_keywords as metaKeywords,
			cost_price as costPrice,
			market_price as marketPrice,
			price,
			stock,
			init_sales as initSales,
			real_sales as realSales,
			color_size as colorSize,
			is_shelves_up as isShelvesUp,
			is_pre_sale as isPreSale,
			goods_category_id as goodsCategoryId,
			goods_introduce_id as goodsIntroduceId,
			goods_params_id as goodsParamsId,
			insert_time as insertTime,
			update_time as updateTime
		from 
		<include refid="tableName"></include>
        where 1 = 1
        	and name = #{name}
		order by insert_time desc
	</select>
</mapper>