<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.yjcycc.shop.goods.mapper.GoodsCategoryMapper">
	
	<!-- table name -->
	<sql id="tableName">
		yjcycc_goods_category
	</sql>
	
	<!-- select field -->
	<sql id="selectField">
		id,
		parent_id as parentId,
		name,
		pic_url as picUrl,
		sort,
		insert_time as insertTime,
		update_time as updateTime
	</sql>
	
	<!-- add field -->
	<sql id="addField">
		id,
		parent_id,
		name,
		pic_url
		sort,
		insert_time,
		update_time
	</sql>
	
	<!-- field values -->
	<sql id="FieldValue">
		#{id},
		#{parentId},
		#{name},
		#{picUrl},
		#{sort},
		#{insertTime},
		#{updateTime}
	</sql>
	
	<!-- save -->
	<insert id="save" parameterType="goodsCategory">
		insert into 
		<include refid="tableName"></include>
		(
		<include refid="addField"></include>
		) values (
		<include refid="FieldValue"></include>
		)
	</insert>
	
	<!-- findById -->
	<select id="findById" resultType="goodsCategory" parameterType="long">
		select 
		<include refid="selectField"></include>
		from 
		<include refid="tableName"></include>
		where 
			id = #{id}
	</select>
	
	<!-- findPager -->
	<select id="findPager" resultType="goodsCategory" parameterType="map">
		select 
			<include refid="selectField"></include>
		from 
			<include refid="tableName"></include>
        where 1 = 1
        	and name = #{name}
		order by 
			insert_time desc
	</select>
	
	<!-- findList -->
	<select id="findList" resultType="goodsCategory" parameterType="map">
		select
			<include refid="selectField"></include>
		from 
			<include refid="tableName"></include>
		where 1 = 1
		<if test="firstLevel != null and firstLevel != ''">
			and parent_id is null
		</if>
		<if test="parentId != null and parentId != ''">
			and parent_id = #{parentId}
		</if>
	</select>
	
</mapper>